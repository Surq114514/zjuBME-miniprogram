<!--pages/me/me.wxml-->
<view class="container">
  <image src="/images/bg.jpg" class="bg-image"></image>
  <!-- 家属绑定 -->
  <view class="family-section">
    <view class="section-header">
      <text class="section-title" style="margin-top: 10px">添加病例</text>
    </view>
    
    <view class="family-card card card-shadow" style="margin-bottom:30px; background-color: #fff5e5">
      <view class="family-status">
        <view class="status-icon {{familyBinding.isBound ? 'bound' : 'unbound'}}">
          <icon type="{{familyBinding.isBound ? 'success' : 'info'}}" size="20" color="white" />
        </view>
        <view class="status-info">
        </view>
      </view>
      
      <view class="family-actions">
<navigator 
  url="/pages/bingli/bingli"                 
  hover-class="card-hover"     
>
        <button wx:if="{{!familyBinding.isBound}}" class="btn btn-primary" bindtap="generateFamilyQRCode">
          <icon type="qrcode" size="16" color="white" style="margin-right: 8px;" />
          点击添加病例
        </button>
      </navigator> 
        <button wx:if="{{familyBinding.isBound}}" class="btn btn-secondary" bindtap="manageFamilyBinding">
          <icon type="setting" size="16" color="white" style="margin-right: 8px;" />
          管理绑定
        </button>
      </view>
            
      <!-- 已绑定成员列表 -->
      <view class="bound-members" wx:if="{{familyBinding.isBound}}">
        <view class="member-item" wx:for="{{familyBinding.boundMembers}}" wx:key="name">
          <view class="member-avatar">
            <icon type="user" size="20" color="#4A90E2" />
          </view>
          <view class="member-info">
            <text class="member-name">{{item.name}}</text>
            <text class="member-relation">{{item.relation}}</text>
          </view>
          <view class="member-status">
            <text class="last-active">{{item.lastActive}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 功能菜单 -->
  <view class="menu-section">
    <view class="menu-item" wx:for="{{menuItems}}" wx:key="id" bindtap="onMenuItemClick" data-action="{{item.action}}">
      <view class="menu-icon" style="background-color: {{item.bgColor}}; color: {{item.color}};">
        <image src= "{{item.image}}" style="width: 48px; height: 48px; " mode="widthFix"/>
      </view>
      <view class="menu-content">
        <text class="menu-name">{{item.name}}</text>
        <icon type="arrow" size="16" color="#C7C7CC" />
      </view>
    </view>
  </view>

  <!-- 康复数据 -->
  <view class="data-section">
    <view class="section-header">
      <text class="section-title">康复数据</text>
      <text class="section-desc">查看您的康复记录和进度统计</text>
    </view>
    
    <view class="data-grid">
      <view class="data-card card card-shadow" style="background-color: #fff5e5">
        <view class="data-icon">
          <icon type="success" size="24" color="#4CD964" />
        </view>
        <view class="data-content">
          <text class="data-value">{{rehabStats.thisWeekRecords}}</text>
          <text class="data-label">本周记录</text>
        </view>
      </view>
      
      <view class="data-card card card-shadow" style="background-color: #fff5e5">
        <view class="data-icon">
          <icon type="info" size="24" color="#4A90E2" />
        </view>
        <view class="data-content">
          <text class="data-value">{{rehabStats.totalDays}}</text>
          <text class="data-label">康复天数</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 应用信息 -->
  <view class="app-info" style="background-color: #fff5e5">
    <view class="info-item">
      <text class="info-label">版本号</text>
      <text class="info-value">{{appInfo.version}}</text>
    </view>
    <view class="info-item">
      <text class="info-label">构建号</text>
      <text class="info-value">{{appInfo.buildNumber}}</text>
    </view>
    <view class="info-item">
      <text class="info-label">最后更新</text>
      <text class="info-value">{{appInfo.lastUpdate}}</text>
    </view>
  </view>

  <!-- 底部链接 -->
  <view class="bottom-links">
    <text class="link-item">关于 KneeRecover</text>
    <text class="link-item">帮助中心</text>
    <text class="link-item">意见反馈</text>
  </view>
</view>
